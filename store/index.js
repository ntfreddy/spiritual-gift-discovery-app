export const state = () => ({
    activeFormIndex: 0,
    forms: [{
            name: 'form1',
            statements: [
                'form1-question-01',
                'form1-question-02',
                'form1-question-03',
                'form1-question-04',
                'form1-question-05',
                'form1-question-06',
                'form1-question-07',
                'form1-question-08',
                'form1-question-09',
                'form1-question-10',
                'form1-question-11',
                'form1-question-12',
                'form1-question-13',
                'form1-question-14',
                'form1-question-15',
                'form1-question-16',
                'form1-question-17',
                'form1-question-18',
                'form1-question-19',
                'form1-question-20',
                'form1-question-21',
                'form1-question-22',
                'form1-question-23',
                'form1-question-24',
                'form1-question-25',
                'form1-question-26',
                'form1-question-27',
                'form1-question-28',
                'form1-question-29',
                'form1-question-30',
                'form1-question-31',
                'form1-question-32',
                'form1-question-33',
                'form1-question-34',
                'form1-question-35',
                'form1-question-36',
                'form1-question-37',
                'form1-question-38',
                'form1-question-39',
                'form1-question-40',
                'form1-question-41',
                'form1-question-42',
                'form1-question-43',
                'form1-question-44',
                'form1-question-45',
                'form1-question-46',
                'form1-question-47',
                'form1-question-48',
                'form1-question-49',
                'form1-question-50',
                'form1-question-51',
                'form1-question-52',
                'form1-question-53',
                'form1-question-54',
                'form1-question-55',
                'form1-question-56',
                'form1-question-57',
                'form1-question-58',
                'form1-question-59',
                'form1-question-60',
                'form1-question-61',
                'form1-question-62',
                'form1-question-63',
                'form1-question-64',
                'form1-question-65',
                'form1-question-66',
                'form1-question-67',
                'form1-question-68',
                'form1-question-69',
                'form1-question-70',
                'form1-question-71',
                'form1-question-72',
                'form1-question-73',
                'form1-question-74',
                'form1-question-75',
                'form1-question-76',
                'form1-question-77',
                'form1-question-78',
                'form1-question-79',
                'form1-question-80',
                'form1-question-81',
                'form1-question-82',
                'form1-question-83',
                'form1-question-84',
                'form1-question-85',
                'form1-question-86',
                'form1-question-87',
                'form1-question-88',
                'form1-question-89',
                'form1-question-90',
            ],
            choices: [{
                "title": 'form1-choice-0',
                "value": 0
            }, {
                "title": 'form1-choice-1',
                "value": 1
            }, {
                "title": 'form1-choice-2',
                "value": 2
            }, {
                "title": 'form1-choice-3',
                "value": 3
            }],
            gifts: [{
                gift: 'form1-pastor',
                relatedQuestions: [0, 18, 36, 54, 72]
            }, {
                gift: 'form1-teacher',
                relatedQuestions: [1, 19, 37, 55, 73]
            }, {
                gift: 'form1-wisdom',
                relatedQuestions: [2, 20, 38, 56, 74]
            }, {
                gift: 'form1-knowledge',
                relatedQuestions: [3, 21, 39, 57, 75]
            }, {
                gift: 'form1-exhortation',
                relatedQuestions: [4, 22, 40, 58, 76]
            }, {
                gift: 'form1-discernment',
                relatedQuestions: [5, 23, 41, 59, 77]
            }, {
                gift: 'form1-giving',
                relatedQuestions: [6, 24, 42, 60, 78]
            }, {
                gift: 'form1-helps',
                relatedQuestions: [7, 25, 43, 61, 79]
            }, {
                gift: 'form1-mercy',
                relatedQuestions: [8, 26, 44, 62, 80]
            }, {
                gift: 'form1-missionary',
                relatedQuestions: [9, 27, 45, 63, 81]
            }, {
                gift: 'form1-evangelist',
                relatedQuestions: [10, 28, 46, 64, 82]
            }, {
                gift: 'form1-hospitality',
                relatedQuestions: [11, 29, 47, 65, 83]
            }, {
                gift: 'form1-faith',
                relatedQuestions: [12, 30, 48, 66, 84]
            }, {
                gift: 'form1-leadership',
                relatedQuestions: [13, 31, 49, 67, 85]
            }, {
                gift: 'form1-administration',
                relatedQuestions: [14, 32, 50, 68, 86]
            }, {
                gift: 'form1-healing',
                relatedQuestions: [15, 33, 51, 69, 87]
            }, {
                gift: 'form1-intercession',
                relatedQuestions: [16, 34, 52, 70, 88]
            }, {
                gift: 'form1-serving',
                relatedQuestions: [17, 35, 53, 71, 89]
            }, ],
        },
        {
            name: 'form2',
            statements: [
                'form2-question-01',
                'form2-question-02',
                'form2-question-03',
                'form2-question-04',
                'form2-question-05',
                'form2-question-06',
                'form2-question-07',
                'form2-question-08',
                'form2-question-09',
                'form2-question-10',
                'form2-question-11',
                'form2-question-12',
                'form2-question-13',
                'form2-question-14',
                'form2-question-15',
                'form2-question-16',
                'form2-question-17',
                'form2-question-18',
                'form2-question-19',
                'form2-question-20',
                'form2-question-21',
                'form2-question-22',
                'form2-question-23',
                'form2-question-24',
                'form2-question-25',
                'form2-question-26',
                'form2-question-27',
                'form2-question-28',
                'form2-question-29',
                'form2-question-30',
                'form2-question-31',
                'form2-question-32',
                'form2-question-33',
                'form2-question-34',
                'form2-question-35',
                'form2-question-36',
                'form2-question-37',
                'form2-question-38',
                'form2-question-39',
                'form2-question-40',
                'form2-question-41',
                'form2-question-42',
                'form2-question-43',
                'form2-question-44',
                'form2-question-45',
                'form2-question-46',
                'form2-question-47',
                'form2-question-48',
                'form2-question-49',
                'form2-question-50',
                'form2-question-51',
                'form2-question-52',
                'form2-question-53',
                'form2-question-54',
                'form2-question-55',
                'form2-question-56',
                'form2-question-57',
                'form2-question-58',
                'form2-question-59',
                'form2-question-60',
                'form2-question-61',
                'form2-question-62',
                'form2-question-63',
                'form2-question-64',
                'form2-question-65',
                'form2-question-66',
                'form2-question-67',
                'form2-question-68',
                'form2-question-69',
                'form2-question-70',
                'form2-question-71',
                'form2-question-72',
                'form2-question-73',
                'form2-question-74',
                'form2-question-75',
                'form2-question-76',
                'form2-question-77',
                'form2-question-78',
                'form2-question-79',
                'form2-question-80',
                'form2-question-81',
                'form2-question-82',
                'form2-question-83',
                'form2-question-84',
                'form2-question-85',
                'form2-question-86',
                'form2-question-87',
                'form2-question-88',
                'form2-question-89',
                'form2-question-90',
            ],
            choices: [{
                "title": 'form2-choice-0',
                "value": 1
            }, {
                "title": 'form2-choice-1',
                "value": 2
            }, {
                "title": 'form2-choice-2',
                "value": 3
            }, {
                "title": 'form2-choice-3',
                "value": 4
            }, {
                "title": 'form2-choice-4',
                "value": 5
            }],
            gifts: [{
                gift: 'form2-administration',
                relatedQuestions: [0, 18, 36, 54, 72]
            }, {
                gift: 'form2-discernment',
                relatedQuestions: [1, 19, 37, 55, 73]
            }, {
                gift: 'form2-evangelist',
                relatedQuestions: [2, 20, 38, 56, 74]
            }, {
                gift: 'form2-exhortation',
                relatedQuestions: [3, 21, 39, 57, 75]
            }, {
                gift: 'form2-faith',
                relatedQuestions: [4, 22, 40, 58, 76]
            }, {
                gift: 'form2-giving',
                relatedQuestions: [5, 23, 41, 59, 77]
            }, {
                gift: 'form2-healing',
                relatedQuestions: [6, 24, 42, 60, 78]
            }, {
                gift: 'form2-helps',
                relatedQuestions: [7, 25, 43, 61, 79]
            }, {
                gift: 'form2-hospitality',
                relatedQuestions: [8, 26, 44, 62, 80]
            }, {
                gift: 'form2-intercession',
                relatedQuestions: [9, 27, 45, 63, 81]
            }, {
                gift: 'form2-knowledge',
                relatedQuestions: [10, 28, 46, 64, 82]
            }, {
                gift: 'form2-leadership',
                relatedQuestions: [11, 29, 47, 65, 83]
            }, {
                gift: 'form2-mercy',
                relatedQuestions: [12, 30, 48, 66, 84]
            }, {
                gift: 'form2-missionary',
                relatedQuestions: [13, 31, 49, 67, 85]
            }, {
                gift: 'form2-pastor',
                relatedQuestions: [14, 32, 50, 68, 86]
            }, {
                gift: 'form2-serving',
                relatedQuestions: [15, 33, 51, 69, 87]
            }, {
                gift: 'form2-teacher',
                relatedQuestions: [16, 34, 52, 70, 88]
            }, {
                gift: 'form2-wisdom',
                relatedQuestions: [17, 35, 53, 71, 89]
            }, ],
        }
    ],
    activeTrialIndex: null,
    trial: {},
    trials: [],
})

export const getters = {
    forms: state => {
        return state.forms
    },
    trials: state => {
        return state.trials
    },
    trial: state => {
        return state.trial
    }
}

export const mutations = {
    SET_ACTIVE_TRIAL_INDEX(state, index) {
        state.activeTrialIndex = index;
    },
    INIT_TRIAL(state, data) {
        state.trial = {
            name: data.name,
            form: data.form,
            date: new Date(),
            results: Array(data.form.statements.length).fill(0),
            scores: Array(data.form.gifts.length).fill(0),
            maxScore: data.form.choices[data.form.choices.length - 1].value * data.form.gifts[0].relatedQuestions.length,
        };
    },
    LOAD_TRIAL(state) {
        state.trial = state.trials[state.activeTrialIndex];
    },
    SAVE_TRIAL(state) {
        //console.log("form : ", f.form);

        state.trials.push(state.trial);
    },
    UPDATE_TRIAL_SCORE(state, data) {
        state.trial.results[data.indexStatement] = data.choiceValue;
        for (var i = 0; i < state.trial.form.gifts.length; i++) {
            var x = 0;
            for (var j = 0; j < state.trial.form.gifts[i].relatedQuestions.length; j++) {
                var index = state.trial.form.gifts[i].relatedQuestions[j];
                //console.log("index : ", index);
                //console.log("results[index] : ", state.trial.results[index]);
                x += state.trial.results[index];
            }
            //console.log("x : ", x);
            state.trial.scores[i] = x;
        }
    }
}

export const actions = {}